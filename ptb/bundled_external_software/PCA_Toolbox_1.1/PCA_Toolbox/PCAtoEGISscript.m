%cell names of output cellscnames = {...	'HMICL',...	'HMICR',...	'HMINL',...	'HMINR',...	'L',...	'R'};%input cells with which to constitute the output cellscellcoll = {...	[1],...	[2],...	[3],...	[4],...    [1 3]    [2 4]};ename = 'LRPhand';  %name of experimentPCAmode = 'temp';   %type of PCAtimePoints = 512;   %number of timepoints in each epochSampleRate = 250;   %number of samples per secondbase = 200;         %length of pre-stimulus period in msec.numchan = 129;      %number of channelsbins = 1;           %number of units equaling one microvoltcal = 50;           %calibration value.  Not used by the Toolkit.numsubs=7;          %number of subjectsnumcells=4;         %number of input cellsnumfacs=11;         %number of factorsexclChan=[125 126 127 128 17 14 22 16 11 6 129 55 62 68 73 76 82];	%to avoid having peri-ocular or midline channels chosen as peak channels for ANOVAs.params=[];                              %parameters for optional parametric factor mapsparamNames=[];                          %names for parametric factor mapsEGISname = 'LRP(pro\t\11f\nk)';         %name of output waveform fileanovaName = 'LRPfac';                   %stem for ANOVA file namestempANOVAtype = 'SC';                   %Scaling for ANOVA files ('SC' microvolt scaled, 'ST' standardized scalingoutputType = 'EGI';                    %EGI for EGIS file and MAT for Matlab matrix named facWaves%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%You only need to change the variables up to this point%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%     Copyright (C) 1999-2008  Joseph Dien% %     This program is free software: you can redistribute it and/or modify%     it under the terms of the GNU General Public License as published by%     the Free Software Foundation, either version 3 of the License, or%     (at your option) any later version.% %     This program is distributed in the hope that it will be useful,%     but WITHOUT ANY WARRANTY; without even the implied warranty of%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the%     GNU General Public License for more details.% %     You should have received a copy of the GNU General Public License%     along with this program.  If not, see <http://www.gnu.org/licenses/>.eval(['save ' EGISname '.mat']);if PCAmode == 'temp'	if timePoints ~= size(FacPat,1)		error('Timepoints variable does not match number of variables in the FacPat factor pattern matrix');	end;	if (numchan * numsubs * numcells) ~= size(FacScr,1)		error('The product of numsubs, numcells, and numchan does not equal the number of observations in the PmxScr factor score matrix');	end;	if numfacs ~= size(FacPat,2)		error('Numfacs variable does not match number of factors in the FacPat factor pattern matrix');	end;	if timePoints ~= size(data,2)		error('Columns of data variable does not match specified number of time points');	end;elseif PCAmode == 'spat'	if numchan ~= size(FacPat,1)		error('Numchan variable does not match number of variables in the FacPat factor pattern matrix');	end;	if (timePoints * numsubs * numcells) ~= size(FacScr,1)		error('The product of numsubs, numcells, and timepoints does not equal the number of observations in the PmxScr factor score matrix');	end;	if numfacs ~= size(FacPat,2)		error('Numfacs variable does not match number of factors in the FacPat factor pattern matrix');	end;	if numchan ~= size(data,1)		error('Columns of data variable does not match specified number of channels');	end;else	error('PCAmode must be set to either temp or spat');end;if length(EGISname) > 27	error('Name of output file (EGISname) too long');end;if outputType == 'EGI'    [peakLatency, peakSamp, peakChan] = PCAtoEGIS(PCAmode, cnames, cellcoll, ename, base, numchan, timePoints, numsubs, SampleRate, bins, cal, EGISname, FacScr, FacPat, varSD, exclChan, 'EGI', 'GAVE', params, paramNames);elseif outputType == 'MAT'    [peakLatency, peakSamp, peakChan, facWaves] = PCAtoEGIS(PCAmode, cnames, cellcoll, ename, base, numchan, timePoints, numsubs, SampleRate, bins, cal, EGISname, FacScr, FacPat, varSD, exclChan, 'MAT', 'GAVE', params, paramNames);end;for i = 1:numfacs;	PCAtoANOVA(FacPat, FacScr, varSD, PCAmode, -(base), numchan, timePoints, bins, numsubs, peakChan(1,i), [1:numcells], peakSamp(1,i), peakSamp(1,i), (1000/SampleRate), 'mean', i, [anovaName num2str(i) '.txt'], tempANOVAtype);end;